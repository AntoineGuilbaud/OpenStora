<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

<title>HHU / OpenStora Forums &bull; View topic - [WORKING] NFS kernel mode package</title>



<!--
	phpBB style name: Absolution
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by: Christian Bullock ( http://www.ChristianBullock.com/ )

	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '8';
	var per_page = '15';
	var base_url = './viewtopic.php?f=1&amp;t=282';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.openstora.com';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="./styles/absolution/template/styleswitcher.js"></script>
<script type="text/javascript" src="./styles/absolution/template/forum_fn.js"></script>
<script type="text/javascript" src="./styles/absolution/template/tooltip.js"></script>
<script type="text/javascript" src="./styles/absolution/template/dropdown.js"></script>

<link href="./styles/absolution/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="./style.php?id=3&amp;lang=en" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/absolution/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/absolution/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/absolution/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />



<!--[if IE]>
	<link rel="stylesheet" type="text/css" href="./styles/absolution/theme/ie.css" />
<![endif]-->

</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="page-wrap">

<div id="main-sidebar"></div>
        
        <div id="main-content">

<p class="skiplink"><a href="#start_here">Skip to content</a></p>
<a id="top" name="top" accesskey="t"></a>

<div id="wrap">
    <div id="header">
	    <div id="header-left">
        <a href="http://www.openstora.com/"><img src="./styles/absolution/theme/images/logo.png" width="416" height="112" alt="" /></a>

		    <!--<div id="site-details">
                    HHU / OpenStora Forums<br />
                    <span></span>
                </div>-->
		</div><!-- /header-left-->
		
		<div id="header-right">
		    <div id="donation">	
			<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
				<input type="hidden" name="cmd" value="_s-xclick">
				<input type="hidden" name="hosted_button_id" value="4AV8ESMYUVECL">
				<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
				<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
			</form>
		    </div>
		</div>
		<div id="header-center">
		    <div id="header-search-box">

			    
					    <form action="./search.php" method="post" id="search">
						    <input name="keywords" id="keywords" type="text" maxlength="128" title="Search for keywords" class="header-search-bar" value="Search…" onclick="if(this.value=='Search…')this.value='';" onblur="if(this.value=='')this.value='Search…';" /><input class="header-search-button" value="" type="submit" /><br /><a href="./search.php" title="View the advanced search options">Advanced search</a>
						</form>
					
			</div><!--/formbox / search-box-->
		</div><!--/header-center-->



	</div><!-- /header-->
	<div class="float-left breadcrumbs">
	<img src="./styles/absolution/theme/images/house.png" width="16" height="16" alt="" />
	    <a href="/" accesskey="h">Home</a> 
	<img src="./styles/absolution/theme/images/wiki_icon.png" width="16" height="16" alt="" />
	    <a href="/wiki" accesskey="w">Wiki</a> 
	<img src="./styles/absolution/theme/images/bz2.png" width="16" height="16" alt="" />
	    <a href="/files" accesskey="f">Files</a> 
	<img src="./styles/absolution/theme/images/forum_icon.png" width="16" height="16" alt="" />
	    <a href="./index.php" accesskey="f">Board index</a>  <strong>&raquo;</strong> <a href="./viewforum.php?f=11">Netgear Stora</a> <strong>&raquo;</strong> <a href="./viewforum.php?f=1">Netgear Stora Stock</a>
	</div><!-- /float-left / breadcrumbs -->



	<div class="float-right">
	    
		<span class="breadcrumbs"><img src="./styles/absolution/theme/images/font_add.png" width="16" height="16" alt="" /> <a href="#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" title="Change font size">Change font size</a> &nbsp;<img src="./styles/absolution/theme/images/email_add.png" width="16" height="16" alt="" /> <a href="./memberlist.php?mode=email&amp;t=282" title="E-mail friend">E-mail friend</a> &nbsp;<img src="./styles/absolution/theme/images/printer_add.png" width="16" height="16" alt="" /> <a href="./viewtopic.php?f=1&amp;t=282&amp;start=105&amp;view=print" title="Print view" accesskey="p">Print view</a></span>
	</div>
	<div class="clear-both" style="margin-bottom: 6px;"></div>

<div class="google-ads" align="center">
<script type="text/javascript">
google_ad_client = "pub-3876771452576850";
/* 728x90, created 5/17/10 */
google_ad_slot = "9953119278";
google_ad_width = 728;
google_ad_height = 90;
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div><!-- ads -->
    
	<div class="toolbar">
	    <div class="toolbar-left">
		    
        </div><!-- /toolbar-left -->
        <div class="toolbar-right">
	        <img src="./styles/absolution/theme/images/help.png" width="16" height="16" alt="" /> <a href="./faq.php" title="Frequently Asked Questions">FAQ</a>
            <img src="./styles/absolution/theme/images/group.png" width="16" height="16" alt="" /> <a href="./memberlist.php" title="View complete list of members">Members</a>
            <img src="./styles/absolution/theme/images/disconnect.png" width="16" height="16" alt="" /> <a href="./ucp.php?mode=logout&amp;sid=0c59154318fc189aaefd19e6b0e28d05" title="Logout [ Alexa [Bot] ]" accesskey="x">Logout [ Alexa [Bot] ]</a>
        </div><!-- /toolbar-right -->

    </div><!-- /toolbar -->
	
	<div class="clear-both"></div>

	<a name="start_here"></a>


<style type="text/css">
.announcement {
text-transform = none;
color: black;
font-size: 14px;
width: 600px;
}

</style>


<div class="announcement">

<!-- We are trying to raise funds for a "play" Stora for Pippone. He needs a machine he can use to develop on. So from now until we raise enough, all donations will be going to a Stora for Pippone.
//<br><br>
//Just remeber Pippone has done a lot for this project.
//<br><br>
//Check the front page for goal information.
-->
</div>


	<div id="page-body">
<h2><a href="./viewtopic.php?f=1&amp;t=282&amp;start=105">[WORKING] NFS kernel mode package</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Hacking and customizing the Netgear Stora NAS. With stock OS.<br /></div>

<div class="topic-actions">

	<div class="buttons">
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="./search.php?t=282">
			<fieldset>
				<input class="inputbox search tiny"  type="text" name="keywords" id="search_keywords" size="20" value="Search this topic…" onclick="if(this.value=='Search this topic…')this.value='';" onblur="if(this.value=='')this.value='Search this topic…';" />
				<input class="button2" type="submit" value="Search" />
				<input type="hidden" value="282" name="t" />
				<input type="hidden" value="msgonly" name="sf" />
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			110 posts
			 &bull; <a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Page <strong>8</strong> of <strong>8</strong></a> &bull; <span><a href="./viewtopic.php?f=1&amp;t=282">1</a> ... <a href="./viewtopic.php?f=1&amp;t=282&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=1&amp;t=282&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=1&amp;t=282&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=1&amp;t=282&amp;start=90">7</a><span class="page-sep">, </span><strong>8</strong></span>
		</div>
	

</div>
<div class="clear"></div>


    
    
    <div class="vt-box " id="p5114">
    
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
    
     
            
            
    	<td width="212" valign="top"><!-- <td> to hold postprofile -->
        
    
    <div class="vt-postprofile" >
    <dl class="dropdown">
  <dt id="p5114-ddheader" onmouseover="ddMenu('p5114',1)" onmouseout="ddMenu('p5114',-1)">
  <img src="./styles/absolution/theme/images/status_offline.png" width="16" height="16" alt="" border="0" title="Offline" class="online-indicator" /> <a href="./memberlist.php?mode=viewprofile&amp;u=2480">Michael</a>
  </dt>
  <dd id="p5114-ddcontent" onmouseover="cancelHide('p5114')" onmouseout="ddMenu('p5114',-1)">
    <ul>
      <li><a href="./memberlist.php?mode=viewprofile&amp;u=2480"><img src="./styles/absolution/theme/images/user_green.png" width="16" height="16" alt="" /> Michael's Profile</a></li>
      <li><a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=5114" title="Private message"><img src="./styles/absolution/theme/images/email_edit.png" width="16" height="16" alt="" /> Private message</a></li>
    </ul>
  </dd>
</dl>

<div style="height: 5px;"></div>

<img src="./styles/absolution/theme/images/no_avatar.png" width="50" height="50" alt="" style="padding-bottom: 5px;" />
                   <br />
                   
                   <span class="vt-rank">Newbie</span><br /><img src="./images/ranks/star.gif" alt="Newbie" title="Newbie" /><br />
                   
      <div class="vt-stats">
      <strong>Posts:</strong> 23<br /><strong>Joined:</strong> Thu Nov 04, 2010 2:57 pm<br />
      </div><!-- /vt-stats -->
      
      <div style="height: 6px;"></div>
      
      
      
 </div><!-- /vt-postprofile -->
 
 </td><!-- /postprofile -->
 <td valign="top" class="vt-content">
 

	
  <div class="vt-datebar">
  <img src="./styles/absolution/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: Tue Feb 01, 2011 3:41 pm 
  </div><!-- /vt-datebar --> 
            
       <div class="vt-postcontent">
       Has anyone got this successfully working with a Mac?<br /><br />I have installed the AUFS version and everything seems to be working on the Stora, and I can see the mounts by performing a &quot;showmount -e stora&quot; on my Mac.  Beyond that it seems a painful mess.<br /><br />I have four exported directories (all in /home) which are mounted by Directory Utility (on OS X 10.5.<img src="./images/smilies/cool.gif" alt="8)" title="Cool" /> with the -P (resvport) option.  This all mostly worked with the userland NFS package.<br /><br />But under the kernel version when I reboot the Mac only one of the mounts will appear, seemingly the first one I try to use.  Strangely though if I restart NFS (/etc/init.d/nfs restart) on the Stora I can then open a different 'first' connection while the one I used previously will also still work.<br /><br />Using the command line (sudo mount_nfs -o resvport stora:/home/www /Volumes/mnttest2) the is the same.  The first instance after restarting NFS works while subsequent connections give the error:<br /><br /><span style="color: #4000FF">mount_nfs: bad MNT RPC: RPC: Unable to receive; errno = Connection reset by peer\n<br />mount_nfs: bad MNT RPC: RPC: Unable to receive; errno = Connection reset by peer\n<br />mount_nfs: can't access /home/www: Permission denied</span><br /><br />The log on the Stora is filled with request entries for every mount attempt, failed or successful, and nothing else to help track down the problem.:<br /><br /><span style="color: #4000FF">Feb  1 15:12:00 axentraserver mountd[17357]: failed to lock /var/lib/nfs/rmtab<br />Feb  1 15:12:00 axentraserver mountd[17357]: authenticated mount request from 192.168.128.30:842 for /home/www (/home/www)</span><br /><br />Although even when a mount appears on my Mac it does not work with Finder.  If I try to copy a file it sometimes gives a failed error, although if I check on the command line the file has copied.  Mostly though it just hangs, and when I restart Finder it loses the connection.  And following any attempt to access a mount  I get numerous Server Connection Interrupted dialogues, even though during them I still have both read and write access via the command line.<br /><br />During the server connection interruptions the Mac's system log reads:<br /><br /><span style="color: #4000FF">Feb  1 15:17:46 mymac kernel[0]: nfs server stora:/home/itunes: lockd not responding<br />Feb  1 15:17:46 mymac KernelEventAgent[37]: tid 00000000 received VQ_NOTRESP event (1)<br />Feb  1 15:17:46 mymac KernelEventAgent[37]: tid 00000000 type 'nfs', mounted on '/Volumes/mnttest', from 'stora:/home/itunes', not responding<br />Feb  1 15:17:46 mymac KernelEventAgent[37]: tid 00000000 found 1 filesystem(s) with problem(s)<br />Feb  1 15:17:46 mymac loginwindow[36]: 1 server now unresponsive<br />Feb  1 15:17:48 mymac kernel[0]: nfs server stora:/home/itunes: lockd not responding<br />Feb  1 15:18:02 mymac kernel[0]: nfs server stora:/home/itunes: lockd alive again<br />Feb  1 15:18:02 mymac KernelEventAgent[37]: tid 00000000 received VQ_NOTRESP event (1)<br />Feb  1 15:18:02 mymac loginwindow[36]: No servers unresponsive</span><br /><br />That sequence is repeated multiple times and for different durations.  On the Stora there are repeated instances of this pairing:<br /><br /><span style="color: #4000FF">Feb  1 15:18:00 axentraserver kernel: statd: server localhost not responding, timed out<br />Feb  1 15:18:00 axentraserver kernel: lockd: cannot monitor mymac.lan</span><br /><br />Apart from performance improvements, I do have a few problem with the userland NFS so would ideally like to switch to kernel mode, so any help would be appreciated.<br /><br />Incidentally, I have turned off v4 support in /etc/sysconfig/nfs so both kernel and userland connections should both be using v3.
       </div> 
       
       

    
    
 </td><!-- /content -->
   </tr>
  <tr class="controls">
  <td style="padding-left: 5px;"><div class="btt"><img src="./styles/absolution/theme/images/arrow_merge.png" width="16" height="16" alt="" /> <a href="#wrap" title="Top">Top</a></div></td>
  
  <td class="controls">
 	
    
    
    </td>
  </tr>
 <!-- /endif for ignore post feature -->
 </table>
 
 </div><!-- /box -->
    

    <div class="vt-seperator " ></div>
    

    
    <!---->
    
    
	



    
    
    <div class="vt-box " id="p5300">
    
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
    
     
            
            
    	<td width="212" valign="top"><!-- <td> to hold postprofile -->
        
    
    <div class="vt-postprofile" >
    <dl class="dropdown">
  <dt id="p5300-ddheader" onmouseover="ddMenu('p5300',1)" onmouseout="ddMenu('p5300',-1)">
  <img src="./styles/absolution/theme/images/status_offline.png" width="16" height="16" alt="" border="0" title="Offline" class="online-indicator" /> <a href="./memberlist.php?mode=viewprofile&amp;u=1237">arno</a>
  </dt>
  <dd id="p5300-ddcontent" onmouseover="cancelHide('p5300')" onmouseout="ddMenu('p5300',-1)">
    <ul>
      <li><a href="./memberlist.php?mode=viewprofile&amp;u=1237"><img src="./styles/absolution/theme/images/user_green.png" width="16" height="16" alt="" /> arno's Profile</a></li>
      <li><a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=5300" title="Private message"><img src="./styles/absolution/theme/images/email_edit.png" width="16" height="16" alt="" /> Private message</a></li>
    </ul>
  </dd>
</dl>

<div style="height: 5px;"></div>

<img src="./styles/absolution/theme/images/no_avatar.png" width="50" height="50" alt="" style="padding-bottom: 5px;" />
                   <br />
                   
                   <span class="vt-rank">Newbie</span><br /><img src="./images/ranks/star.gif" alt="Newbie" title="Newbie" /><br />
                   
      <div class="vt-stats">
      <strong>Posts:</strong> 1<br /><strong>Joined:</strong> Fri Aug 06, 2010 3:00 am<br />
      </div><!-- /vt-stats -->
      
      <div style="height: 6px;"></div>
      
      
      
 </div><!-- /vt-postprofile -->
 
 </td><!-- /postprofile -->
 <td valign="top" class="vt-content">
 

	
  <div class="vt-datebar">
  <img src="./styles/absolution/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: Mon Feb 07, 2011 9:46 pm 
  </div><!-- /vt-datebar --> 
            
       <div class="vt-postcontent">
       hi there i must say i havent read the whole thread now. but i ve got a question do i get problems mit nfs and the stora.<br /><br />i am refer to the following warning<br />&quot;Warning: File locking (rpc.lock) does not seem to exist, and without this (using -o nolock option on client) NFS mounts may not be usable/safe for many applications e.g. home dirs. waiting for response from someone with more experience on this.&quot;<br /><br />greeting
       </div> 
       
       

    
    
 </td><!-- /content -->
   </tr>
  <tr class="controls">
  <td style="padding-left: 5px;"><div class="btt"><img src="./styles/absolution/theme/images/arrow_merge.png" width="16" height="16" alt="" /> <a href="#wrap" title="Top">Top</a></div></td>
  
  <td class="controls">
 	
    
    
    </td>
  </tr>
 <!-- /endif for ignore post feature -->
 </table>
 
 </div><!-- /box -->
    

    <div class="vt-seperator " ></div>
    

    
    <!---->
    
    
	



    
    
    <div class="vt-box " id="p5302">
    
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
    
     
            
            
    	<td width="212" valign="top"><!-- <td> to hold postprofile -->
        
    
    <div class="vt-postprofile" >
    <dl class="dropdown">
  <dt id="p5302-ddheader" onmouseover="ddMenu('p5302',1)" onmouseout="ddMenu('p5302',-1)">
  <img src="./styles/absolution/theme/images/status_offline.png" width="16" height="16" alt="" border="0" title="Offline" class="online-indicator" /> <a href="./memberlist.php?mode=viewprofile&amp;u=1639">Smiff</a>
  </dt>
  <dd id="p5302-ddcontent" onmouseover="cancelHide('p5302')" onmouseout="ddMenu('p5302',-1)">
    <ul>
      <li><a href="./memberlist.php?mode=viewprofile&amp;u=1639"><img src="./styles/absolution/theme/images/user_green.png" width="16" height="16" alt="" /> Smiff's Profile</a></li>
      <li><a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=5302" title="Private message"><img src="./styles/absolution/theme/images/email_edit.png" width="16" height="16" alt="" /> Private message</a></li>
    </ul>
  </dd>
</dl>

<div style="height: 5px;"></div>

<img src="./styles/absolution/theme/images/no_avatar.png" width="50" height="50" alt="" style="padding-bottom: 5px;" />
                   <br />
                   
                   <span class="vt-rank">Full Member</span><br /><img src="./images/ranks/star.gif" alt="Full Member" title="Full Member" /><br />
                   
      <div class="vt-stats">
      <strong>Posts:</strong> 139<br /><strong>Joined:</strong> Thu Sep 16, 2010 6:14 am<br />
      </div><!-- /vt-stats -->
      
      <div style="height: 6px;"></div>
      
      
      
 </div><!-- /vt-postprofile -->
 
 </td><!-- /postprofile -->
 <td valign="top" class="vt-content">
 

	
  <div class="vt-datebar">
  <img src="./styles/absolution/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: Mon Feb 07, 2011 11:25 pm 
  </div><!-- /vt-datebar --> 
            
       <div class="vt-postcontent">
       hi just saw that notification email. i've been away for a couple of months sorry. Has anyone else had a chance to look at that file locking issue? i still have the Stora (been running it as a proxy and SMB share perfectly well over xmas) but would like to have another go at the NFS server. was it just an Ubuntu 10.10 client problem? anyone else tried mounting home dirs on the Stora? i couldn't get it to work (ubuntu client hung during login) unless i used -o nolock.<br /><br />that mac problem above looks like a lock issue aswell? i really haven't looked at this at all in 2months since i wrote the wiki page sorry  <img src="./images/smilies/sad.gif" alt=":(" title="Sad" />
       </div> 
       
       

    
    
 </td><!-- /content -->
   </tr>
  <tr class="controls">
  <td style="padding-left: 5px;"><div class="btt"><img src="./styles/absolution/theme/images/arrow_merge.png" width="16" height="16" alt="" /> <a href="#wrap" title="Top">Top</a></div></td>
  
  <td class="controls">
 	
    
    
    </td>
  </tr>
 <!-- /endif for ignore post feature -->
 </table>
 
 </div><!-- /box -->
    

    <div class="vt-seperator " ></div>
    

    
    <!---->
    
    
	



    
    
    <div class="vt-box " id="p5329">
    
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
    
     
            
            
    	<td width="212" valign="top"><!-- <td> to hold postprofile -->
        
    
    <div class="vt-postprofile" >
    <dl class="dropdown">
  <dt id="p5329-ddheader" onmouseover="ddMenu('p5329',1)" onmouseout="ddMenu('p5329',-1)">
  <img src="./styles/absolution/theme/images/status_offline.png" width="16" height="16" alt="" border="0" title="Offline" class="online-indicator" /> <a href="./memberlist.php?mode=viewprofile&amp;u=2886">logictrees</a>
  </dt>
  <dd id="p5329-ddcontent" onmouseover="cancelHide('p5329')" onmouseout="ddMenu('p5329',-1)">
    <ul>
      <li><a href="./memberlist.php?mode=viewprofile&amp;u=2886"><img src="./styles/absolution/theme/images/user_green.png" width="16" height="16" alt="" /> logictrees's Profile</a></li>
      <li><a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=5329" title="Private message"><img src="./styles/absolution/theme/images/email_edit.png" width="16" height="16" alt="" /> Private message</a></li>
    </ul>
  </dd>
</dl>

<div style="height: 5px;"></div>

<img src="./styles/absolution/theme/images/no_avatar.png" width="50" height="50" alt="" style="padding-bottom: 5px;" />
                   <br />
                   
                   <span class="vt-rank">Newbie</span><br /><img src="./images/ranks/star.gif" alt="Newbie" title="Newbie" /><br />
                   
      <div class="vt-stats">
      <strong>Posts:</strong> 1<br /><strong>Joined:</strong> Mon Dec 27, 2010 11:31 pm<br />
      </div><!-- /vt-stats -->
      
      <div style="height: 6px;"></div>
      
      
      
 </div><!-- /vt-postprofile -->
 
 </td><!-- /postprofile -->
 <td valign="top" class="vt-content">
 

	
  <div class="vt-datebar">
  <img src="./styles/absolution/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: Thu Feb 10, 2011 12:44 am 
  </div><!-- /vt-datebar --> 
            
       <div class="vt-postcontent">
       <![if !IE]><div class="bubble"></div><![endif]><blockquote><div><cite>Smiff wrote:</cite>hi just saw that notification email. i've been away for a couple of months sorry. Has anyone else had a chance to look at that file locking issue? i still have the Stora (been running it as a proxy and SMB share perfectly well over xmas) but would like to have another go at the NFS server. was it just an Ubuntu 10.10 client problem? anyone else tried mounting home dirs on the Stora? i couldn't get it to work (ubuntu client hung during login) unless i used -o nolock.<br /><br />that mac problem above looks like a lock issue aswell? i really haven't looked at this at all in 2months since i wrote the wiki page sorry  <img src="./images/smilies/sad.gif" alt=":(" title="Sad" /></div></blockquote><br /><br />My findings...<br /><br />strace shows rmtab etc. generally seem to opened for read and then a write lock attempted, giving the error message. After closing the file is generally then opened for write, no lock requested, and generally no write actually performed. This in mountd. I have no idea about the whys and wherefors since rather bizzarely I can not find the source code though any reasonable search I can think of on google. I may actually have to faff on and work out how to obtain debian source packages...some further poking which I couldn't be bothered with earlier shows the rmtab lock is a in libc (so not mountd itself).<br /><br />Now the reason I was looking at this is because I thought it might have been relevent for:<br /><br />1) mount of an export<br /> - fine<br />2) unmount to reverse the mount of 1)<br /> - fine (except rmtab doesn't necessarily get cleared for some reason)<br />3) mount of same export as in 1)<br /> - *not* fine, client ends up timing out.<br /><br />Restoration of service involves restart of server side.<br /><br />I far away from having even an idea about what the code is doing, the protocol, or how it all hangs together, so am completely baffled. What I can see is the strace on the 2nd mount has quite a different sequence of syscalls going on when compared to the 1st.<br /><br />I should all mention that after the 2nd mount request showmounts seems to suggest the unmount wasn't really [completely] actioned; or it could be just that the rmtab information hasn't been updated properly and that's what showmount is reading.
       </div> 
       
       

    
    
 </td><!-- /content -->
   </tr>
  <tr class="controls">
  <td style="padding-left: 5px;"><div class="btt"><img src="./styles/absolution/theme/images/arrow_merge.png" width="16" height="16" alt="" /> <a href="#wrap" title="Top">Top</a></div></td>
  
  <td class="controls">
 	
    
    
    </td>
  </tr>
 <!-- /endif for ignore post feature -->
 </table>
 
 </div><!-- /box -->
    

    <div class="vt-seperator " ></div>
    

    
    <!---->
    
    
	



    
    
    <div class="vt-box " id="p5449">
    
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
    
     
            
            
    	<td width="212" valign="top"><!-- <td> to hold postprofile -->
        
    
    <div class="vt-postprofile" >
    <dl class="dropdown">
  <dt id="p5449-ddheader" onmouseover="ddMenu('p5449',1)" onmouseout="ddMenu('p5449',-1)">
  <img src="./styles/absolution/theme/images/status_offline.png" width="16" height="16" alt="" border="0" title="Offline" class="online-indicator" /> <a href="./memberlist.php?mode=viewprofile&amp;u=221" style="color: #AA0000;" class="username-coloured">pippone</a>
  </dt>
  <dd id="p5449-ddcontent" onmouseover="cancelHide('p5449')" onmouseout="ddMenu('p5449',-1)">
    <ul>
      <li><a href="./memberlist.php?mode=viewprofile&amp;u=221"><img src="./styles/absolution/theme/images/user_green.png" width="16" height="16" alt="" /> pippone's Profile</a></li>
      <li><a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=5449" title="Private message"><img src="./styles/absolution/theme/images/email_edit.png" width="16" height="16" alt="" /> Private message</a></li>
    </ul>
  </dd>
</dl>

<div style="height: 5px;"></div>

<a href="./memberlist.php?mode=viewprofile&amp;u=221"><img src="./download/file.php?avatar=221_1285747476.jpg" width="65" height="65" alt="User avatar" /></a><br />
                   
                   <span class="vt-rank">Global Moderator</span><br /><img src="./images/ranks/stargmod.gif" alt="Global Moderator" title="Global Moderator" /><br />
                   
      <div class="vt-stats">
      <strong>Posts:</strong> 1260<br /><strong>Joined:</strong> Mon Apr 05, 2010 6:45 pm<br /><strong>Location:</strong> Italy
      </div><!-- /vt-stats -->
      
      <div style="height: 6px;"></div>
      
      
      
 </div><!-- /vt-postprofile -->
 
 </td><!-- /postprofile -->
 <td valign="top" class="vt-content">
 

	
  <div class="vt-datebar">
  <img src="./styles/absolution/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: Sun Feb 20, 2011 5:12 pm 
  </div><!-- /vt-datebar --> 
            
       <div class="vt-postcontent">
       source code for nfs is here: <!-- m --><a class="postlink" href="http://nfs.sourceforge.net/">http://nfs.sourceforge.net/</a><!-- m --><br />I've been trying to solve these lock issues for a while (see the &quot;unable to lock rmtab, etc.. errors when nfsd starts) but with no luck and unfortunately I run out of time lately, feel free to give it a go!
       </div> 
       
       <div id="sig5449" class="signature">--pippone</div>

    
    
 </td><!-- /content -->
   </tr>
  <tr class="controls">
  <td style="padding-left: 5px;"><div class="btt"><img src="./styles/absolution/theme/images/arrow_merge.png" width="16" height="16" alt="" /> <a href="#wrap" title="Top">Top</a></div></td>
  
  <td class="controls">
 	
    
    
    </td>
  </tr>
 <!-- /endif for ignore post feature -->
 </table>
 
 </div><!-- /box -->
    

    <div class="vt-seperator " ></div>
    

    
    <!---->
    
    
	



	<form id="viewtopic" method="post" action="./viewtopic.php?f=1&amp;t=282&amp;start=105">

	<fieldset class="display-options" style="margin-top: 0; ">
		<a href="./viewtopic.php?f=1&amp;t=282&amp;start=90" class="left-box left">Previous</a>
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			110 posts
			 &bull; <a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Page <strong>8</strong> of <strong>8</strong></a> &bull; <span><a href="./viewtopic.php?f=1&amp;t=282">1</a> ... <a href="./viewtopic.php?f=1&amp;t=282&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=1&amp;t=282&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=1&amp;t=282&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=1&amp;t=282&amp;start=90">7</a><span class="page-sep">, </span><strong>8</strong></span>
		</div>
	
</div>


	<p></p><p><a href="./viewforum.php?f=1" class="left-box left" accesskey="r">Return to Netgear Stora Stock</a></p>

	<form method="post" id="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="10">Announcements</option>
			
				<option value="8">&nbsp; &nbsp;Site Announcements</option>
			
				<option value="4">&nbsp; &nbsp;Site Suggestions</option>
			
				<option value="20">General</option>
			
				<option value="18">&nbsp; &nbsp;Packages/Software General Discussion</option>
			
				<option value="19">&nbsp; &nbsp;Hardware general discussion.</option>
			
				<option value="11">Netgear Stora</option>
			
				<option value="1" selected="selected">&nbsp; &nbsp;Netgear Stora Stock</option>
			
				<option value="9">&nbsp; &nbsp;Stora Web Interface</option>
			
				<option value="6">&nbsp; &nbsp;Netgear Stora Custom Operating Systems</option>
			
				<option value="14">&nbsp; &nbsp;Hardware mods</option>
			
				<option value="15">Seagate GoFlex Home</option>
			
				<option value="16">&nbsp; &nbsp;Seagate GoFlex Home stock firmware mods</option>
			
				<option value="17">&nbsp; &nbsp;Seagate GoFlex Home custom operating systems</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3><a href="./viewonline.php">Who is online</a></h3>
	<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Alexa [Bot]</span>, <span style="color: #9E8DA7;" class="username-coloured">Google [Bot]</span>, <a href="./memberlist.php?mode=viewprofile&amp;u=2424">rdainton</a> and 1 guest</p>
</div>

<div id="page-footer">

<div class="toolbar-footer">
<div class="toolbar-left" style="padding-top: 5px; height: 31px;">
<div class="float-left"><img src="./styles/absolution/theme/images/house.png" width="16" height="16" alt="" /> <a href="./index.php" accesskey="h">Board index</a>

<!-- By removing the following copyright attribution to http://www.ChristianBullock.com you are violating
intellectual copyright laws. You are therefore required to leave the copyright intact, linked to http://www.christianbullock.com

If you don't agree to leave the style copyright in place, don't use this style  -->

<br />&copy; Absolution Style by <a href="http://www.christianbullock.com">Christian Bullock</a></div></div>

<!-- End of copyright notice -->

<div class="float-right toolbar-bottom-right"><div class="toolbar-right" style="padding-top: 5px; height: 31px; padding-right: 5px;"><img src="./styles/absolution/theme/images/bricks.png" width="16" height="16" alt="" /> <a href="./memberlist.php?mode=leaders">The team</a>All times are UTC <br />

<!--
	We request you retain the full copyright notice below including the link to www.phpbb.com.
	This not only gives respect to the large amount of time given freely by the developers
	but also helps build interest, traffic and use of phpBB3. If you (honestly) cannot retain
	the full copyright we ask you at least leave in place the "Powered by phpBB" line, with
	"phpBB" linked to www.phpbb.com. If you refuse to include even this then support on our
	forums may be affected.

	The phpBB Group : 2006
//-->

Powered by <a href="http://www.phpbb.com/">phpBB</a>&copy; 2000, 2002, 2005, 2007 phpBB Group
</div>
</div><!-- /float-right -->
</div><!-- /footer-toolbar-->




		

</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</div> <!-- /#page-content -->


	<div id="secondary-sidebar"></div>
    </div> <!-- /#page-wrap -->
<script type="text/javascript" src="mobiquo/tapatalkdetect.js"></script>

 </body>
</html>